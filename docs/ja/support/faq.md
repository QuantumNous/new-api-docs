## コア概念 (Core Concepts)

| 日本語 | English | 説明 | Description |
|------|---------|------|-------------|
| 倍率 | Ratio | 価格計算に使用される乗数因子 | Multiplier factor used for price calculation |
| トークン | Token | APIアクセス認証情報、またはモデルが処理するテキスト単位 | API access credentials or text units processed by models |
| チャネル | Channel | APIサービスプロバイダーへのアクセス経路 | Access channel for API service providers |
| グループ | Group | ユーザーまたはトークンの分類。価格倍率に影響する | Classification of users or tokens, affecting price ratios |
| クォータ | Quota | ユーザーが利用可能なサービスの上限 | Available service quota for users |

# ❓ よくある質問 (FAQ)

## 💰 クォータ関連の質問

??? tip "クォータとは何ですか？どのように計算されますか？"
    
    クォータの計算式は以下の通りです：
    
    クォータ = グループ倍率 * モデル倍率 * （プロンプト token 数 + 補完 token 数 * 補完倍率）

    補完倍率の説明：
    
    - GPT3.5：固定で 1.33
    
    - GPT4：固定で 2（公式設定と一致）

    注意事項：
    
    - 非ストリーミングモードでは、公式インターフェースは消費された総 token を返しますが、プロンプトと補完では消費倍率が異なります
    
    - New API のデフォルト倍率は公式倍率と一致しており、調整済みです

??? tip "アカウントのクォータが十分なのに、クォータ不足と表示されるのはなぜですか？"
    
    これは、トークンクォータとアカウントクォータが分離されているためです：
    
    - トークンクォータは、最大使用量を制限するためにのみ使用されます
    - ユーザーはトークンクォータを自由に設定できます
    - トークンクォータが十分であるか確認してください

## 🔧 チャネル設定に関する質問

??? tip "チャネルにおける重み（Weight）と優先度（Priority）は何ですか？"
    
    重みと優先度は、チャネルの使用順序と割り当てを制御する2つの重要なパラメータです：

    - 優先度（Priority）：数字が大きいほど優先度が高くなり、優先度の高いチャネルが優先的に使用されます
    
    - 重み（Weight）：同じ優先度のチャネル間では、重みの比率に応じてリクエストが割り当てられます
    
    例：
    
    - 優先度2のチャネルは、優先度1のチャネルよりも優先的に使用されます
    
    - どちらも優先度1の2つのチャネルがあり、重みの比率が2:1の場合、リクエストは2:1の比率で割り当てられます

??? tip "利用可能なチャネルがないと表示されますか？"
    
    以下の設定を確認してください：

    1. ユーザーグループ設定
    2. チャネルグループ設定
    3. チャネルのモデル設定

??? tip "チャネルテストのエラー：invalid character '<' looking for beginning of value"
    
    このエラーは、戻り値が有効な JSON ではなく、HTML ページであることを示しています。
    
    最も可能性の高い原因は、デプロイサイトの IP またはプロキシノードが CloudFlare によってブロックされていることです。

??? tip "チャネルテストのエラー：倍率または価格が設定されていません。管理者に連絡して設定してください"

    「システム設定 - 運用設定 - モデル倍率設定」で倍率または価格が設定されているか確認してください。

    または、「システム設定 - 運用設定」で「自己利用モード」を有効にしてください。

## 🌐 デプロイメントと接続に関する質問

??? tip "ChatGPT Next Web のエラー：Failed to fetch"
    
    以下の点を確認してください：

    1. デプロイ時に BASE_URL を設定しないでください
    2. インターフェースアドレスと API Key が正しく入力されていることを確認してください
    3. HTTPS が有効になっているか確認してください（ブラウザは HTTPS ドメイン下の HTTP リクエストをブロックします）

??? tip "エラー：現在のグループの負荷は飽和状態です。しばらくしてから再度お試しください"
    
    これは、アップストリームチャネルで 429 エラー（リクエストが多すぎる）が発生したことを示しています。

## 📦 データベースとアップグレードに関する質問

??? tip "アップグレード後、データは失われますか？"
    
    データベースの種類によって異なります：

    - MySQL：データは失われません
    - SQLite：デプロイコマンドに従ってボリュームをマウントし、one-api.db データベースファイルを永続化する必要があります。そうしないと、コンテナ再起動後にデータが失われます

??? tip "アップグレード前にデータベースを変更する必要がありますか？"
    
    通常は必要ありません。システムは初期化時に自動的に調整を行います。
    
    特別な処理が必要な場合は、更新ログで説明され、対応するスクリプトが提供されます。

??? tip "データベースを手動で変更した後、「データベースの整合性が損なわれました。管理者に連絡してください」というエラーが表示されますか？"
    
    このエラーは、`ability` テーブルで無効なチャネル ID レコードが検出されたことを示します。一般的な原因：
    
    - `channel` テーブルのレコードを削除した際に、`ability` テーブル内の無効なチャネルが同時にクリーンアップされなかった
    - 各チャネルがサポートするモデルには、`ability` テーブルに対応するレコードが必要です

!!! note "お探しの質問が見つかりませんか？"
    ここで問題が解決しなかった場合は、以下をご利用ください：
    
    1. [完全なドキュメント](../getting-started.md) を参照する
    2. [GitHubでIssueを提出する](feedback-issues.md)
    3. [QQ交流グループに参加してサポートを求める](community-interaction.md)
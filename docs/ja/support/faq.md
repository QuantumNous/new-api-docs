# ❓ よくある質問

## 💰 クォータ関連の質問

??? tip "クォータとは何ですか？どのように計算されますか？"
    
    クォータの計算式は以下の通りです：
    
    クォータ = グループ倍率 * モデル倍率 * （プロンプトトークン数 + 補完トークン数 * 補完倍率）

    補完倍率の説明：
    
    - GPT3.5：固定で 1.33
    
    - GPT4：固定で 2（公式と一致）

    注意事項：
    
    - 非ストリーミングモードでは、公式インターフェースは消費された合計トークンを返しますが、プロンプトと補完の消費倍率は異なります
    
    - New API のデフォルト倍率は公式倍率と一致しており、調整済みです

??? tip "アカウントクォータが十分なのに、クォータ不足と表示されるのはなぜですか？"
    
    これは、トークンクォータとアカウントクォータが分離されているためです：
    
    - トークンクォータは、最大使用量制限を設定するためにのみ使用されます
    - ユーザーはトークンクォータを自由に設定できます
    - トークンクォータが十分であることを確認してください

## 🔧 チャネル設定の質問

??? tip "チャネルにおける重みと優先度とは何ですか？"
    
    重みと優先度は、チャネルの使用順序と割り当てを制御する2つの重要なパラメータです：

    - 優先度（Priority）：数字が大きいほど優先度が高くなり、優先度の高いチャネルが優先的に使用されます
    
    - 重み（Weight）：同じ優先度のチャネル間では、重みの比率に応じてリクエストが割り当てられます
    
    例：
    
    - 優先度 2 のチャネルは、優先度 1 のチャネルよりも優先的に使用されます
    
    - 同じ優先度 1 の2つのチャネルで、重み比が 2:1 の場合、リクエストは 2:1 の比率で割り当てられます

??? tip "利用可能なチャネルがないと表示されますか？"
    
    以下の設定を確認してください：

    1. ユーザーグループ設定
    2. チャネルグループ設定
    3. チャネルのモデル設定

??? tip "チャネルテストのエラー：invalid character '<' looking for beginning of value"
    
    このエラーは、戻り値が有効な JSON ではなく、HTML ページであることを示しています。
    
    最も可能性の高い原因は、デプロイサイトの IP またはプロキシノードが CloudFlare によってブロックされていることです。

??? tip "チャネルテストのエラー：倍率または価格が設定されていません。管理者に連絡して設定してください"

    「システム設定 - 運用設定 - モデル倍率設定」で倍率または価格が設定されているか確認してください。

    または、「システム設定 - 運用設定」で「自己利用モード」を有効にしてください。

## 🌐 デプロイと接続の質問

??? tip "ChatGPT Next Web のエラー：Failed to fetch"
    
    以下の点を確認してください：

    1. デプロイ時に BASE_URL を設定しないでください
    2. インターフェースアドレスと API Key が正しく入力されていることを確認してください
    3. HTTPS が有効になっているか確認してください（ブラウザは HTTPS ドメイン下の HTTP リクエストをブロックします）

??? tip "エラー：現在のグループ負荷は飽和状態です。しばらくしてから再度お試しください"
    
    これは、アップストリームチャネルで 429 エラー（リクエストが多すぎます）が発生したことを示しています。

## 📦 データベースとアップグレードの質問

??? tip "アップグレード後、データは失われますか？"
    
    データベースの種類によって異なります：

    - MySQL：データは失われません
    - SQLite：デプロイコマンドに従ってボリュームをマウントし、one-api.db データベースファイルを永続化する必要があります。そうしないと、コンテナ再起動後にデータが失われます

??? tip "アップグレード前にデータベースを変更する必要がありますか？"
    
    通常は必要ありません。システムは初期化時に自動的に調整を行います。
    
    特別な処理が必要な場合は、更新ログで説明され、対応するスクリプトが提供されます。

??? tip "手動でデータベースを変更した後、エラー：データベースの整合性が破壊されました。管理者に連絡してください、と表示されますか？"
    
    このエラーは、ability テーブルで無効なチャネル ID レコードが検出されたことを示しています。一般的な原因：
    
    - channel テーブルのレコードを削除した際に、ability テーブル内の無効なチャネルが同期的にクリーンアップされなかった
    - 各チャネルがサポートするモデルは、ability テーブルに対応するレコードが必要です

!!! note "お探しの質問が見つかりませんか？"
    ここで問題が解決しなかった場合は、以下をご利用ください：
    
    1. [完全なドキュメント](../getting-started.md) を確認する
    2. [GitHubでIssueを提出する](feedback-issues.md)
    3. [QQ交流グループに参加してサポートを求める](community-interaction.md)
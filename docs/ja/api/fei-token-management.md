# ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

!!! info "æ©Ÿèƒ½èª¬æ˜"
    APIãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯ http(s)://`<your-domain>` ã«çµ±ä¸€ã•ã‚Œã¦ã„ã¾ã™

    æœ¬ç•ªç’°å¢ƒã§ã¯èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã«HTTPSã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚HTTPã¯é–‹ç™ºç’°å¢ƒã§ã®ã¿æ¨å¥¨ã•ã‚Œã¾ã™ã€‚

    ãƒ¦ãƒ¼ã‚¶ãƒ¼APIãƒˆãƒ¼ã‚¯ãƒ³ã®å®Œå…¨ãªç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ãƒˆãƒ¼ã‚¯ãƒ³ã®ä½œæˆã€æ›´æ–°ã€å‰Šé™¤ã€ãƒãƒƒãƒæ“ä½œãªã©ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ãƒ¢ãƒ‡ãƒ«åˆ¶é™ã€IPåˆ¶é™ã€ã‚¯ã‚©ãƒ¼ã‚¿ç®¡ç†ã€æœ‰åŠ¹æœŸé™ãªã©ã®è©³ç´°ãªåˆ¶å¾¡ãŒå«ã¾ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒˆãƒ¼ã‚¯ãƒ³ãƒšãƒ¼ã‚¸ã®ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã§ã™ã€‚

## ğŸ” ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼

### å…¨ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šå…¨ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/token/`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¨ãƒˆãƒ¼ã‚¯ãƒ³ãƒªã‚¹ãƒˆã‚’ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã§å–å¾—ã—ã¾ã™

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/token/?p=1&size=20', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token'  
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": {  
    "items": [  
      {  
        "id": 1,  
        "name": "API Token",  
        "key": "<YOUR_API_KEY>",  
        "status": 1,  
        "remain_quota": 1000000,  
        "unlimited_quota": false,  
        "expired_time": 1640995200,  
        "created_time": 1640908800,  
        "accessed_time": 1640995000  
      }  
    ],  
    "total": 5,  
    "page": 1,  
    "page_size": 20  
  }  
}
```

â— å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è·å–Tokenåˆ—è¡¨å¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `p` ï¼ˆæ•°å€¤ï¼‰: ãƒšãƒ¼ã‚¸ç•ªå·ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ 1
- `size` ï¼ˆæ•°å€¤ï¼‰: 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ 20
- `items` ï¼ˆé…åˆ—ï¼‰: ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±ãƒªã‚¹ãƒˆ
- `total` ï¼ˆæ•°å€¤ï¼‰: ãƒˆãƒ¼ã‚¯ãƒ³ã®ç·æ•°
- `page` ï¼ˆæ•°å€¤ï¼‰: ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ç•ªå·
- `page_size` ï¼ˆæ•°å€¤ï¼‰: 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°

### ãƒˆãƒ¼ã‚¯ãƒ³ã®æ¤œç´¢

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒˆãƒ¼ã‚¯ãƒ³ã®æ¤œç´¢
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/token/search`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ãƒˆãƒ¼ã‚¯ãƒ³å€¤ã«åŸºã¥ã„ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ¤œç´¢ã—ã¾ã™

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/token/search?keyword=api&token=sk-123', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token'  
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": [  
    {  
      "id": 1,  
      "name": "API Token",  
      "key": "sk-your-token-placeholder",  
      "status": 1,  
      "remain_quota": 1000000  
    }  
  ]  
}
```

â— å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "æœç´¢Tokenå¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `keyword` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã€‚ãƒˆãƒ¼ã‚¯ãƒ³åã«ä¸€è‡´ã—ã¾ã™
- `token` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒˆãƒ¼ã‚¯ãƒ³å€¤æ¤œç´¢ã€‚éƒ¨åˆ†ä¸€è‡´ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™

### å€‹åˆ¥ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šå€‹åˆ¥ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/token/:id`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šæŒ‡å®šã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã—ã¾ã™

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/token/123', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token'  
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": {  
    "id": 123,  
    "name": "API Token",  
    "key": "sk-your-token-placeholder",  
    "status": 1,  
    "remain_quota": 1000000,  
    "unlimited_quota": false,  
    "model_limits_enabled": true,  
    "model_limits": "gpt-3.5-turbo,gpt-4",  
    "allow_ips": "192.168.1.1,10.0.0.1",  
    "group": "default",  
    "expired_time": 1640995200,  
    "created_time": 1640908800,  
    "accessed_time": 1640995000  
  }  
}
```

â— å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "Tokenä¸å­˜åœ¨"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

`id` ï¼ˆæ•°å€¤ï¼‰: ãƒˆãƒ¼ã‚¯ãƒ³IDã€‚URLãƒ‘ã‚¹ã‚’é€šã˜ã¦æ¸¡ã•ã‚Œã¾ã™

### ãƒˆãƒ¼ã‚¯ãƒ³ã®ä½œæˆ

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒˆãƒ¼ã‚¯ãƒ³ã®ä½œæˆ
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/token/`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šæ–°ã—ã„APIãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚ãƒãƒƒãƒä½œæˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/token/', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token'  
  },  
  body: JSON.stringify({  
    name: "My API Token",  
    expired_time: 1640995200,  
    remain_quota: 1000000,  
    unlimited_quota: false,  
    model_limits_enabled: true,  
    model_limits: ["gpt-3.5-turbo", "gpt-4"],  
    allow_ips: "192.168.1.1,10.0.0.1",  
    group: "default"  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": true,  
  "message": ""  
}
```

â— å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "ä»¤ç‰Œåç§°è¿‡é•¿"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `name` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒˆãƒ¼ã‚¯ãƒ³åã€‚æœ€å¤§é•·ã¯ 30 æ–‡å­—ã§ã™
- `expired_time` ï¼ˆæ•°å€¤ï¼‰: æœ‰åŠ¹æœŸé™ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€‚-1 ã¯ç„¡æœŸé™ã‚’ç¤ºã—ã¾ã™
- `remain_quota` ï¼ˆæ•°å€¤ï¼‰: æ®‹ã‚Šã‚¯ã‚©ãƒ¼ã‚¿ï¼ˆæ®‹é«˜ï¼‰
- `unlimited_quota` ï¼ˆãƒ–ãƒ¼ãƒ«å‹ï¼‰: ç„¡åˆ¶é™ã‚¯ã‚©ãƒ¼ã‚¿ã§ã‚ã‚‹ã‹ã©ã†ã‹
- `model_limits_enabled` ï¼ˆãƒ–ãƒ¼ãƒ«å‹ï¼‰: ãƒ¢ãƒ‡ãƒ«åˆ¶é™ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã©ã†ã‹
- `model_limits` ï¼ˆé…åˆ—ï¼‰: ä½¿ç”¨ã‚’è¨±å¯ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã®ãƒªã‚¹ãƒˆ
- `allow_ips` ï¼ˆæ–‡å­—åˆ—ï¼‰: è¨±å¯ã™ã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š
- `group` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ‰€å±ã‚°ãƒ«ãƒ¼ãƒ—

### ãƒˆãƒ¼ã‚¯ãƒ³ã®æ›´æ–°

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒˆãƒ¼ã‚¯ãƒ³ã®æ›´æ–°
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPUT
- **ãƒ‘ã‚¹**ï¼š`/api/token/`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šãƒˆãƒ¼ã‚¯ãƒ³è¨­å®šã‚’æ›´æ–°ã—ã¾ã™ã€‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ‡ã‚Šæ›¿ãˆã¨å®Œå…¨æ›´æ–°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼ˆå®Œå…¨æ›´æ–°ï¼‰ï¼š

```
const response = await fetch('/api/token/', {  
  method: 'PUT',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token'  
  },  
  body: JSON.stringify({  
    id: 123,  
    name: "Updated Token",  
    expired_time: 1640995200,  
    remain_quota: 2000000,  
    unlimited_quota: false,  
    model_limits_enabled: true,  
    model_limits: ["gpt-3.5-turbo", "gpt-4"],  
    allow_ips: "192.168.1.1",  
    group: "vip"  
  })  
});  
const data = await response.json();
```

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ã¿æ›´æ–°ï¼‰ï¼š

```
const response = await fetch('/api/token/?status_only=true', {  
  method: 'PUT',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token'  
  },  
  body: JSON.stringify({  
    id: 123,  
    status: 1  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": {  
    "id": 123,  
    "name": "Updated Token",  
    "status": 1  
  }  
}
```

â— å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "ä»¤ç‰Œå·²è¿‡æœŸï¼Œæ— æ³•å¯ç”¨ï¼Œè¯·å…ˆä¿®æ”¹ä»¤ç‰Œè¿‡æœŸæ—¶é—´ï¼Œæˆ–è€…è®¾ç½®ä¸ºæ°¸ä¸è¿‡æœŸ"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `id` ï¼ˆæ•°å€¤ï¼‰: ãƒˆãƒ¼ã‚¯ãƒ³IDã€‚å¿…é ˆ
- `status_only` ï¼ˆã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ã¿ã‚’æ›´æ–°ã™ã‚‹ã‹ã©ã†ã‹
- ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ãƒˆãƒ¼ã‚¯ãƒ³ä½œæˆAPIã¨åŒã˜ã§ã€ã™ã¹ã¦ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™

### ãƒˆãƒ¼ã‚¯ãƒ³ã®å‰Šé™¤

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒˆãƒ¼ã‚¯ãƒ³ã®å‰Šé™¤
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šDELETE
- **ãƒ‘ã‚¹**ï¼š`/api/token/:id`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šæŒ‡å®šã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/token/123', {  
  method: 'DELETE',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token'  
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": true,  
  "message": ""  
}
```

â— å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "Tokenä¸å­˜åœ¨"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

`id` ï¼ˆæ•°å€¤ï¼‰: ãƒˆãƒ¼ã‚¯ãƒ³IDã€‚URLãƒ‘ã‚¹ã‚’é€šã˜ã¦æ¸¡ã•ã‚Œã¾ã™

### ãƒˆãƒ¼ã‚¯ãƒ³ã®ä¸€æ‹¬å‰Šé™¤

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒˆãƒ¼ã‚¯ãƒ³ã®ä¸€æ‹¬å‰Šé™¤
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/token/batch`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šè¤‡æ•°ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¸€æ‹¬ã§å‰Šé™¤ã—ã¾ã™

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/token/batch', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token'  
  },  
  body: JSON.stringify({  
    ids: [1, 2, 3, 4, 5]  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": 5  
}
```

â— å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "å‚æ•°é”™è¯¯"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `ids` ï¼ˆé…åˆ—ï¼‰: å‰Šé™¤ã™ã‚‹ãƒˆãƒ¼ã‚¯ãƒ³IDã®ãƒªã‚¹ãƒˆã€‚å¿…é ˆã§ã‚ã‚Šã€ç©ºã§ã‚ã£ã¦ã¯ãªã‚Šã¾ã›ã‚“
- `data` ï¼ˆæ•°å€¤ï¼‰: æ­£å¸¸ã«å‰Šé™¤ã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã®æ•°
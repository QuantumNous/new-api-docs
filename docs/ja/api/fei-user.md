# ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

!!! info "æ©Ÿèƒ½èª¬æ˜"
    ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯ http(s)://`<your-domain>` ã«çµ±ä¸€ã•ã‚Œã¦ã„ã¾ã™ã€‚

    æœ¬ç•ªç’°å¢ƒã§ã¯ã€èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã« HTTPS ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚HTTP ã¯é–‹ç™ºç’°å¢ƒã§ã®ã¿æ¨å¥¨ã•ã‚Œã¾ã™ã€‚

    ç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³ã€å€‹äººãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã€Token ç®¡ç†ã€ãƒãƒ£ãƒ¼ã‚¸/æ”¯æ‰•ã„ã€ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ãªã©ã®æ©Ÿèƒ½ã‚’å«ã‚€ã€4æ®µéšã®æ¨©é™ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå…¬é–‹/ãƒ¦ãƒ¼ã‚¶ãƒ¼/ç®¡ç†è€…/Rootï¼‰ã¨å®Œå…¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ã‚’å®Ÿç¾ã™ã‚‹ã‚³ã‚¢ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚2FAã€ãƒ¡ãƒ¼ãƒ«èªè¨¼ã€è¤‡æ•°ã® OAuth ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

## ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³

### ğŸ” èªè¨¼ä¸è¦

#### æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šæ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/user/register`
- **èªè¨¼è¦ä»¶**ï¼šå…¬é–‹
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šæ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ãƒ¡ãƒ¼ãƒ«èªè¨¼ã¨ç´¹ä»‹ã‚³ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/register', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json'  
  },  
  body: JSON.stringify({  
    username: "newuser",  
    password: "password123",  
    email: "user@example.com",  
    verification_code: "123456",  
    aff_code: "INVITE123"  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "ç”¨æˆ·æ³¨å†ŒæˆåŠŸ"  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "ç®¡ç†å‘˜å…³é—­äº†æ–°ç”¨æˆ·æ³¨å†Œ"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `username` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€å¿…é ˆ
- `password` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€å¿…é ˆ
- `email` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚ãƒ¡ãƒ¼ãƒ«èªè¨¼ãŒæœ‰åŠ¹ãªå ´åˆã«å¿…é ˆ
- `verification_code` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¡ãƒ¼ãƒ«èªè¨¼ã‚³ãƒ¼ãƒ‰ã€‚ãƒ¡ãƒ¼ãƒ«èªè¨¼ãŒæœ‰åŠ¹ãªå ´åˆã«å¿…é ˆ
- `aff_code` ï¼ˆæ–‡å­—åˆ—ï¼‰: ç´¹ä»‹ã‚³ãƒ¼ãƒ‰ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/user/login`
- **èªè¨¼è¦ä»¶**ï¼šå…¬é–‹
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚äºŒè¦ç´ èªè¨¼ï¼ˆ2FAï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/login', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json'  
  },  
  body: JSON.stringify({  
    username: "testuser",  
    password: "password123"  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼ˆ2FAãªã—ï¼‰ï¼š

```
{  
  "success": true,  
  "message": "ç™»å½•æˆåŠŸ",  
  "data": {  
    "token": "user_access_token",  
    "user": {  
      "id": 1,  
      "username": "testuser",  
      "role": 1,  
      "quota": 1000000  
    }  
  }  
}
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼ˆ2FAãŒå¿…è¦ï¼‰ï¼š

```
{  
  "success": true,  
  "message": "è¯·è¾“å…¥ä¸¤æ­¥éªŒè¯ç ",  
  "data": {  
    "require_2fa": true  
  }  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "ç®¡ç†å‘˜å…³é—­äº†å¯†ç ç™»å½•"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `username` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€å¿…é ˆ
- `password` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€å¿…é ˆ
- `require_2fa` ï¼ˆãƒ–ãƒ¼ãƒ«å‹ï¼‰: äºŒè¦ç´ èªè¨¼ãŒå¿…è¦ã‹ã©ã†ã‹

#### Epay æ”¯æ‰•ã„ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šEpay æ”¯æ‰•ã„ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/epay/notify`
- **èªè¨¼è¦ä»¶**ï¼šå…¬é–‹
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šEpayï¼ˆæ˜“æ”¯ä»˜ï¼‰ã‚·ã‚¹ãƒ†ãƒ ã®æ”¯æ‰•ã„ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é€šçŸ¥ã‚’å‡¦ç†ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
_// é€šå¸¸ã€æ”¯æ‰•ã„ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦è‡ªå‹•çš„ã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰æ‰‹å‹•ã§å‘¼ã³å‡ºã™å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“  _
_// ç¤ºä¾‹URL: /api/user/epay/notify?trade_no=USR1NO123456&money=10.00&trade_status=TRADE_SUCCESS_
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "æ”¯ä»˜æˆåŠŸ"  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è®¢å•ä¸å­˜åœ¨æˆ–å·²å¤„ç†"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `trade_no` ï¼ˆæ–‡å­—åˆ—ï¼‰: å–å¼•æ³¨æ–‡ç•ªå·
- `money` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ”¯æ‰•ã„é‡‘é¡
- `trade_status` ï¼ˆæ–‡å­—åˆ—ï¼‰: å–å¼•ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
- `sign` ï¼ˆæ–‡å­—åˆ—ï¼‰: ç½²åæ¤œè¨¼

#### å…¨ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒªã‚¹ãƒˆè¡¨ç¤ºï¼ˆèªè¨¼ä¸è¦ç‰ˆï¼‰

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šå…¨ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒªã‚¹ãƒˆè¡¨ç¤º
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/groups`
- **èªè¨¼è¦ä»¶**ï¼šå…¬é–‹
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šã‚·ã‚¹ãƒ†ãƒ å†…ã®ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ãªã—ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/groups', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json'  
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": {  
    "default": {  
      "ratio": 1.0,  
      "desc": "é»˜è®¤åˆ†ç»„"  
    },  
    "vip": {  
      "ratio": 0.8,  
      "desc": "VIPåˆ†ç»„"  
    },  
    "auto": {  
      "ratio": "è‡ªåŠ¨",  
      "desc": "è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜åˆ†ç»„"  
    }  
  }  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è·å–åˆ†ç»„ä¿¡æ¯å¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

`data` ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰: ã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ãƒãƒƒãƒ”ãƒ³ã‚°

- ã‚­ãƒ¼ ï¼ˆæ–‡å­—åˆ—ï¼‰: ã‚°ãƒ«ãƒ¼ãƒ—å
- `ratio` ï¼ˆæ•°å€¤/æ–‡å­—åˆ—ï¼‰: ã‚°ãƒ«ãƒ¼ãƒ—æ¯”ç‡ (Ratio)ã€‚"è‡ªå‹•"ã¯è‡ªå‹•é¸æŠã‚’æ„å‘³ã—ã¾ã™
- `desc` ï¼ˆæ–‡å­—åˆ—ï¼‰: ã‚°ãƒ«ãƒ¼ãƒ—èª¬æ˜

### ğŸ” ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼

#### ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/logout`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªã‚¢ã—ã€ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’çµ‚äº†ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/logout', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": ""  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "ä¼šè¯æ¸…é™¤å¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—

## ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®æ“ä½œ

### ğŸ” ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼

#### è‡ªèº«ã®æ‰€å±ã‚°ãƒ«ãƒ¼ãƒ—ã®å–å¾—

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šè‡ªèº«ã®æ‰€å±ã‚°ãƒ«ãƒ¼ãƒ—ã®å–å¾—
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/self/groups`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šç¾åœ¨ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨å¯èƒ½ãªã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚ã‚°ãƒ«ãƒ¼ãƒ—æ¯”ç‡ã¨èª¬æ˜ãŒå«ã¾ã‚Œã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/self/groups', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": {  
    "default": {  
      "ratio": 1.0,  
      "desc": "é»˜è®¤åˆ†ç»„"  
    },  
    "vip": {  
      "ratio": 0.8,  
      "desc": "VIPåˆ†ç»„"  
    },  
    "auto": {  
      "ratio": "è‡ªåŠ¨",  
      "desc": "è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜åˆ†ç»„"  
    }  
  }  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è·å–åˆ†ç»„ä¿¡æ¯å¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

`data` ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨å¯èƒ½ãªã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ãƒãƒƒãƒ”ãƒ³ã‚° group.goï¼š25-48

- ã‚­ãƒ¼ ï¼ˆæ–‡å­—åˆ—ï¼‰: ã‚°ãƒ«ãƒ¼ãƒ—å
- `ratio` ï¼ˆæ•°å€¤/æ–‡å­—åˆ—ï¼‰: ã‚°ãƒ«ãƒ¼ãƒ—æ¯”ç‡ (Ratio)ã€‚"è‡ªå‹•"ã¯æœ€é©ãªã‚°ãƒ«ãƒ¼ãƒ—ã®è‡ªå‹•é¸æŠã‚’æ„å‘³ã—ã¾ã™
- `desc` ï¼ˆæ–‡å­—åˆ—ï¼‰: ã‚°ãƒ«ãƒ¼ãƒ—èª¬æ˜

#### å€‹äººãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®å–å¾—

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šå€‹äººãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®å–å¾—
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/self`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚æ¨©é™ã€ã‚¯ã‚©ãƒ¼ã‚¿ã€è¨­å®šãªã©ãŒå«ã¾ã‚Œã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/self', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": {  
    "id": 1,  
    "username": "testuser",  
    "display_name": "Test User",  
    "role": 1,  
    "status": 1,  
    "email": "user@example.com",  
    "group": "default",  
    "quota": 1000000,  
    "used_quota": 50000,  
    "request_count": 100,  
    "aff_code": "ABC123",  
    "aff_count": 5,  
    "aff_quota": 10000,  
    "aff_history_quota": 50000,  
    "inviter_id": 0,  
    "linux_do_id": "",  
    "setting": "{}",  
    "stripe_customer": "",  
    "sidebar_modules": "{\"chat\":{\"enabled\":true}}",  
    "permissions": {  
      "can_view_logs": true,  
      "can_manage_tokens": true  
    }  
  }  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `id` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID
- `username` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼å
- `display_name` ï¼ˆæ–‡å­—åˆ—ï¼‰: è¡¨ç¤ºå
- `role` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«ã€‚1=ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€10=ç®¡ç†è€…ã€100=Root ãƒ¦ãƒ¼ã‚¶ãƒ¼
- `status` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ã€‚1=æ­£å¸¸ã€2=ç„¡åŠ¹
- `email` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
- `group` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ‰€å±ã‚°ãƒ«ãƒ¼ãƒ—
- `quota` ï¼ˆæ•°å€¤ï¼‰: ç·ã‚¯ã‚©ãƒ¼ã‚¿
- `used_quota` ï¼ˆæ•°å€¤ï¼‰: ä½¿ç”¨æ¸ˆã¿ã‚¯ã‚©ãƒ¼ã‚¿
- `request_count` ï¼ˆæ•°å€¤ï¼‰: ãƒªã‚¯ã‚¨ã‚¹ãƒˆå›æ•°
- `aff_code` ï¼ˆæ–‡å­—åˆ—ï¼‰: ç´¹ä»‹ã‚³ãƒ¼ãƒ‰
- `aff_count` ï¼ˆæ•°å€¤ï¼‰: ç´¹ä»‹äººæ•°
- `aff_quota` ï¼ˆæ•°å€¤ï¼‰: ç´¹ä»‹å ±é…¬ã‚¯ã‚©ãƒ¼ã‚¿
- `aff_history_quota` ï¼ˆæ•°å€¤ï¼‰: å±¥æ­´ç´¹ä»‹ã‚¯ã‚©ãƒ¼ã‚¿
- `inviter_id` ï¼ˆæ•°å€¤ï¼‰: æ‹›å¾…è€… ID
- `linux_do_id` ï¼ˆæ–‡å­—åˆ—ï¼‰: LinuxDo ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ ID
- `setting` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š JSON æ–‡å­—åˆ—
- `stripe_customer` ï¼ˆæ–‡å­—åˆ—ï¼‰: Stripe é¡§å®¢ ID
- `sidebar_modules` ï¼ˆæ–‡å­—åˆ—ï¼‰: ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š JSON æ–‡å­—åˆ—
- `permissions` ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™æƒ…å ±

#### ãƒ¢ãƒ‡ãƒ«å¯è¦–æ€§ã®å–å¾—

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒ¢ãƒ‡ãƒ«å¯è¦–æ€§ã®å–å¾—
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/models`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãª AI ãƒ¢ãƒ‡ãƒ«ã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/models', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": [  
    "gpt-3.5-turbo",  
    "gpt-4",  
    "claude-3-sonnet",  
    "claude-3-haiku"  
  ]  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

`data` ï¼ˆé…åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«åã®ãƒªã‚¹ãƒˆ

#### å€‹äººãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šå€‹äººãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPUT
- **ãƒ‘ã‚¹**ï¼š`/api/user/self`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å€‹äººæƒ…å ±ã¾ãŸã¯ã‚µã‚¤ãƒ‰ãƒãƒ¼è¨­å®šã‚’æ›´æ–°ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼ˆå€‹äººæƒ…å ±ã®æ›´æ–°ï¼‰ï¼š

```
const response = await fetch('/api/user/self', {  
  method: 'PUT',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  },  
  body: JSON.stringify({  
    display_name: "New Display Name",  
    email: "newemail@example.com"  
  })  
});  
const data = await response.json();
```

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼è¨­å®šã®æ›´æ–°ï¼‰ï¼š

```
const response = await fetch('/api/user/self', {  
  method: 'PUT',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  },  
  body: JSON.stringify({  
    sidebar_modules: JSON.stringify({  
      chat: { enabled: true, playground: true },  
      console: { enabled: true, token: true }  
    })  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "æ›´æ–°æˆåŠŸ"  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è¾“å…¥ä¸åˆæ³•"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `display_name` ï¼ˆæ–‡å­—åˆ—ï¼‰: è¡¨ç¤ºåã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `email` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `password` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `sidebar_modules` ï¼ˆæ–‡å­—åˆ—ï¼‰: ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š JSON æ–‡å­—åˆ—ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å‰Šé™¤

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å‰Šé™¤
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šDELETE
- **ãƒ‘ã‚¹**ï¼š`/api/user/self`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã€‚Root ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å‰Šé™¤ã§ãã¾ã›ã‚“ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/self', {  
  method: 'DELETE',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": ""  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "ä¸èƒ½åˆ é™¤è¶…çº§ç®¡ç†å‘˜è´¦æˆ·"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®ç”Ÿæˆ

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®ç”Ÿæˆ
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/token`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã«ã€APIå‘¼ã³å‡ºã—ã«ä½¿ç”¨ã™ã‚‹æ–°ã—ã„ã‚¢ã‚¯ã‚»ã‚¹**ãƒˆãƒ¼ã‚¯ãƒ³**ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/token', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": "<YOUR_API_KEY>"  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "ç”Ÿæˆä»¤ç‰Œå¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

`data` ï¼ˆæ–‡å­—åˆ—ï¼‰: ç”Ÿæˆã•ã‚ŒãŸã‚¢ã‚¯ã‚»ã‚¹**ãƒˆãƒ¼ã‚¯ãƒ³**

#### ç´¹ä»‹ã‚³ãƒ¼ãƒ‰æƒ…å ±ã®å–å¾—

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šç´¹ä»‹ã‚³ãƒ¼ãƒ‰æƒ…å ±ã®å–å¾—
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/aff`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç´¹ä»‹ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã¾ãŸã¯ç”Ÿæˆã—ã¾ã™ã€‚æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‹›å¾…ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/aff', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": "ABC123"  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è·å–æ¨å¹¿ç å¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

`data` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç´¹ä»‹ã‚³ãƒ¼ãƒ‰ã€‚å­˜åœ¨ã—ãªã„å ´åˆã¯4æ¡ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

#### ã‚¯ã‚©ãƒ¼ã‚¿ã®ç›´æ¥ãƒãƒ£ãƒ¼ã‚¸

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šã‚¯ã‚©ãƒ¼ã‚¿ã®ç›´æ¥ãƒãƒ£ãƒ¼ã‚¸
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/user/topup`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šäº¤æ›ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«**ã‚¯ã‚©ãƒ¼ã‚¿**ã‚’ãƒãƒ£ãƒ¼ã‚¸ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/topup', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  },  
  body: JSON.stringify({  
    key: "REDEEM123456"  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "å…‘æ¢æˆåŠŸ",  
  "data": 100000  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "å…‘æ¢ç æ— æ•ˆæˆ–å·²ä½¿ç”¨"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `key` ï¼ˆæ–‡å­—åˆ—ï¼‰: äº¤æ›ã‚³ãƒ¼ãƒ‰ã€å¿…é ˆ
- `data` ï¼ˆæ•°å€¤ï¼‰: æˆåŠŸæ™‚ã«äº¤æ›ã•ã‚ŒãŸ**ã‚¯ã‚©ãƒ¼ã‚¿**æ•°ãŒè¿”ã•ã‚Œã¾ã™

#### æ”¯æ‰•ã„æ³¨æ–‡ã®é€ä¿¡

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šæ”¯æ‰•ã„æ³¨æ–‡ã®é€ä¿¡
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/user/pay`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ”¯æ‰•ã„æ³¨æ–‡ã‚’ä½œæˆã—ã¾ã™ã€‚è¤‡æ•°ã®æ”¯æ‰•ã„æ–¹æ³•ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/pay', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  },  
  body: JSON.stringify({  
    amount: 10000,  
    payment_method: "alipay",  
    top_up_code: ""  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "success",  
  "data": {  
    "pid": "12345",  
    "type": "alipay",  
    "out_trade_no": "USR1NO123456",  
    "notify_url": "https://example.com/notify",  
    "return_url": "https://example.com/return",  
    "name": "TUC10000",  
    "money": "10.00",  
    "sign": "abc123def456"  
  },  
  "url": "https://pay.example.com/submit"  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "å……å€¼æ•°é‡ä¸èƒ½å°äº 1000"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `amount` ï¼ˆæ•°å€¤ï¼‰: ãƒãƒ£ãƒ¼ã‚¸æ•°é‡ã€‚æœ€å°ãƒãƒ£ãƒ¼ã‚¸**ã‚¯ã‚©ãƒ¼ã‚¿**ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ topup.goï¼š133-136
- `payment_method` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ”¯æ‰•ã„æ–¹æ³•ã€‚ä¾‹ï¼šã€Œalipayã€ã€ã€Œwxpayã€ãªã©
- `top_up_code` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒãƒ£ãƒ¼ã‚¸ã‚³ãƒ¼ãƒ‰ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `data` ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰: æ”¯æ‰•ã„ãƒ•ã‚©ãƒ¼ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `url` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ”¯æ‰•ã„é€ä¿¡å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹

#### ã‚¯ã‚©ãƒ¼ã‚¿æ”¯æ‰•ã„

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šã‚¯ã‚©ãƒ¼ã‚¿æ”¯æ‰•ã„
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/user/amount`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šæŒ‡å®šã•ã‚ŒãŸãƒãƒ£ãƒ¼ã‚¸æ•°é‡ã«å¯¾å¿œã™ã‚‹å®Ÿéš›ã®æ”¯æ‰•ã„é‡‘é¡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/amount', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  },  
  body: JSON.stringify({  
    amount: 10000,  
    top_up_code: ""  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "success",  
  "data": "10.00"  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "å……å€¼æ•°é‡ä¸èƒ½å°äº 1000"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `amount` ï¼ˆæ•°å€¤ï¼‰: ãƒãƒ£ãƒ¼ã‚¸æ•°é‡ã€‚æœ€å°ãƒãƒ£ãƒ¼ã‚¸**ã‚¯ã‚©ãƒ¼ã‚¿**ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
- `top_up_code` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒãƒ£ãƒ¼ã‚¸ã‚³ãƒ¼ãƒ‰ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `data` ï¼ˆæ–‡å­—åˆ—ï¼‰: å®Ÿéš›ã«æ”¯æ‰•ã†å¿…è¦ã®ã‚ã‚‹é‡‘é¡ï¼ˆå…ƒï¼‰

#### ç´¹ä»‹ã‚¯ã‚©ãƒ¼ã‚¿ã®æŒ¯æ›¿

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šç´¹ä»‹**ã‚¯ã‚©ãƒ¼ã‚¿**ã®æŒ¯æ›¿
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/user/aff_transfer`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šç´¹ä»‹å ±é…¬**ã‚¯ã‚©ãƒ¼ã‚¿**ã‚’ä½¿ç”¨å¯èƒ½ãª**ã‚¯ã‚©ãƒ¼ã‚¿**ã«å¤‰æ›ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/aff_transfer', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  },  
  body: JSON.stringify({  
    quota: 50000  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "åˆ’è½¬æˆåŠŸ"  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "é‚€è¯·é¢åº¦ä¸è¶³ï¼"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

`quota` ï¼ˆæ•°å€¤ï¼‰: å¤‰æ›ã™ã‚‹**ã‚¯ã‚©ãƒ¼ã‚¿**æ•°é‡ã€‚æœ€å°å˜ä½**ã‚¯ã‚©ãƒ¼ã‚¿**ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã®æ›´æ–°

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã®æ›´æ–°
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPUT
- **ãƒ‘ã‚¹**ï¼š`/api/user/setting`
- **èªè¨¼è¦ä»¶**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å€‹äººè¨­å®šæ§‹æˆã‚’æ›´æ–°ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/setting', {  
  method: 'PUT',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_user_token',
    'New-Api-User': 'Bearer your_user_id'
  },  
  body: JSON.stringify({  
    theme: "dark",  
    language: "zh-CN",  
    notifications: {  
      email: true,  
      browser: false  
    }  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "è®¾ç½®æ›´æ–°æˆåŠŸ"  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è®¾ç½®æ ¼å¼é”™è¯¯"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã«ã¯ã€ä»»æ„ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ JSON å½¢å¼ã§å«ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™
- å…·ä½“çš„ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®è¨­å®šãƒšãƒ¼ã‚¸ã®è¦ä»¶ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™

## ç®¡ç†è€…ã«ã‚ˆã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

### ğŸ” ç®¡ç†è€…èªè¨¼

#### å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã®å–å¾—

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆã®å–å¾—
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/`
- **èªè¨¼è¦ä»¶**ï¼šç®¡ç†è€…
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šã‚·ã‚¹ãƒ†ãƒ å†…ã®å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¹ãƒˆæƒ…å ±ã‚’ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã§å–å¾—ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/?p=1&page_size=20', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": {  
    "items": [  
      {  
        "id": 1,  
        "username": "testuser",  
        "display_name": "Test User",  
        "role": 1,  
        "status": 1,  
        "email": "user@example.com",  
        "group": "default",  
        "quota": 1000000,  
        "used_quota": 50000,  
        "request_count": 100  
      }  
    ],  
    "total": 50,  
    "page": 1,  
    "page_size": 20  
  }  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `p` ï¼ˆæ•°å€¤ï¼‰: ãƒšãƒ¼ã‚¸ç•ªå·ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ 1
- `page_size` ï¼ˆæ•°å€¤ï¼‰: ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®æ•°é‡ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ 20
- `items` ï¼ˆé…åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãƒªã‚¹ãƒˆ
- `total` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç·æ•°
- `page` ï¼ˆæ•°å€¤ï¼‰: ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ç•ªå·
- `page_size` ï¼ˆæ•°å€¤ï¼‰: ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®æ•°é‡

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/search`
- **èªè¨¼è¦ä»¶**ï¼šç®¡ç†è€…
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨**ã‚°ãƒ«ãƒ¼ãƒ—**ã«åŸºã¥ã„ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢ã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/search?keyword=test&group=default&p=1&page_size=20', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": {  
    "items": [  
      {  
        "id": 1,  
        "username": "testuser",  
        "display_name": "Test User",  
        "role": 1,  
        "status": 1,  
        "email": "test@example.com",  
        "group": "default"  
      }  
    ],  
    "total": 1,  
    "page": 1,  
    "page_size": 20  
  }  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "æœç´¢ç”¨æˆ·å¤±è´¥"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `keyword` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€è¡¨ç¤ºåã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ä¸€è‡´ã—ã¾ã™
- `group` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼**ã‚°ãƒ«ãƒ¼ãƒ—**ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶
- `p` ï¼ˆæ•°å€¤ï¼‰: ãƒšãƒ¼ã‚¸ç•ªå·ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ 1
- `page_size` ï¼ˆæ•°å€¤ï¼‰: ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®æ•°é‡ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ 20

#### å˜ä¸€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šå˜ä¸€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šGET
- **ãƒ‘ã‚¹**ï¼š`/api/user/:id`
- **èªè¨¼è¦ä»¶**ï¼šç®¡ç†è€…
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šæŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚æ¨©é™ãƒã‚§ãƒƒã‚¯ãŒå«ã¾ã‚Œã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/123', {  
  method: 'GET',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": "",  
  "data": {  
    "id": 123,  
    "username": "targetuser",  
    "display_name": "Target User",  
    "role": 1,  
    "status": 1,  
    "email": "target@example.com",  
    "group": "default",  
    "quota": 1000000,  
    "used_quota": 50000,  
    "request_count": 100,  
    "aff_code": "ABC123",  
    "aff_count": 5  
  }  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "æ— æƒè·å–åŒçº§æˆ–æ›´é«˜ç­‰çº§ç”¨æˆ·çš„ä¿¡æ¯"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `id` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ IDã€‚URL ãƒ‘ã‚¹çµŒç”±ã§æ¸¡ã•ã‚Œã¾ã™
- å®Œå…¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒè¿”ã•ã‚Œã¾ã™ãŒã€ç®¡ç†è€…ã¯åŒç­‰ã¾ãŸã¯ãã‚Œä»¥ä¸Šã®æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±ã‚’è¡¨ç¤ºã§ãã¾ã›ã‚“

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/user/`
- **èªè¨¼è¦ä»¶**ï¼šç®¡ç†è€…
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šæ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ç®¡ç†è€…ã¯è‡ªèº«ä»¥ä¸Šã®æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'Bearer your_user_id' 
  },  
  body: JSON.stringify({  
    username: "newuser",  
    password: "password123",  
    display_name: "New User",  
    role: 1  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": ""  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "æ— æ³•åˆ›å»ºæƒé™å¤§äºç­‰äºè‡ªå·±çš„ç”¨æˆ·"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `username` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€å¿…é ˆ
- `password` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€å¿…é ˆ
- `display_name` ï¼ˆæ–‡å­—åˆ—ï¼‰: è¡¨ç¤ºåã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼å
- `role` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«ã€‚ç¾åœ¨ã®ç®¡ç†è€…ãƒ­ãƒ¼ãƒ«ã‚ˆã‚Šã‚‚ä½ã„å¿…è¦ãŒã‚ã‚Šã¾ã™

#### å‡çµ/ãƒªã‚»ãƒƒãƒˆãªã©ã®ç®¡ç†æ“ä½œ

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šå‡çµ/ãƒªã‚»ãƒƒãƒˆãªã©ã®ç®¡ç†æ“ä½œ
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPOST
- **ãƒ‘ã‚¹**ï¼š`/api/user/manage`
- **èªè¨¼è¦ä»¶**ï¼šç®¡ç†è€…
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã€æœ‰åŠ¹åŒ–ã€ç„¡åŠ¹åŒ–ã€å‰Šé™¤ã€æ˜‡æ ¼ã€é™æ ¼ãªã©ã®ç®¡ç†æ“ä½œã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/manage', {  
  method: 'POST',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'Bearer your_user_id'
  },  
  body: JSON.stringify({  
    id: 123,  
    action: "disable"  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": ""  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "æ— æ³•ç¦ç”¨è¶…çº§ç®¡ç†å‘˜ç”¨æˆ·"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `id` ï¼ˆæ•°å€¤ï¼‰: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ IDã€å¿…é ˆ
- `action` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ“ä½œã‚¿ã‚¤ãƒ—ã€å¿…é ˆã€é¸æŠå¯èƒ½ãªå€¤ï¼š

    - `disable`ï¼š ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç„¡åŠ¹åŒ–
    - `enable`ï¼š ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æœ‰åŠ¹åŒ–
    - `delete`ï¼š ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤
    - `promote`ï¼š ç®¡ç†è€…ã«æ˜‡æ ¼ï¼ˆRoot ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿æ“ä½œå¯èƒ½ï¼‰
    - `demote`ï¼š ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é™æ ¼

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ›´æ–°

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ›´æ–°
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šPUT
- **ãƒ‘ã‚¹**ï¼š`/api/user/`
- **èªè¨¼è¦ä»¶**ï¼šç®¡ç†è€…
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã™ã€‚æ¨©é™ãƒã‚§ãƒƒã‚¯ã¨**ã‚¯ã‚©ãƒ¼ã‚¿**å¤‰æ›´å±¥æ­´ãŒå«ã¾ã‚Œã¾ã™ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/', {  
  method: 'PUT',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'Bearer your_user_id'
  },  
  body: JSON.stringify({  
    id: 123,  
    username: "updateduser",  
    display_name: "Updated User",  
    email: "updated@example.com",  
    quota: 2000000,  
    role: 1,  
    status: 1  
  })  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": ""  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "æ— æƒæ›´æ–°åŒæƒé™ç­‰çº§æˆ–æ›´é«˜æƒé™ç­‰çº§çš„ç”¨æˆ·ä¿¡æ¯"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `id` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ IDã€å¿…é ˆ
- `username` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `display_name` ï¼ˆæ–‡å­—åˆ—ï¼‰: è¡¨ç¤ºåã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `email` ï¼ˆæ–‡å­—åˆ—ï¼‰: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `password` ï¼ˆæ–‡å­—åˆ—ï¼‰: æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚ç©ºã®å ´åˆã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ›´æ–°ã—ã¾ã›ã‚“
- `quota` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®**ã‚¯ã‚©ãƒ¼ã‚¿**ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³
- `role` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«ã€‚ç¾åœ¨ã®ç®¡ç†è€…ãƒ­ãƒ¼ãƒ«ã‚ˆã‚Šã‚‚ä½ã„å¿…è¦ãŒã‚ã‚Šã¾ã™
- `status` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‰Šé™¤

- **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‰Šé™¤
- **HTTP ãƒ¡ã‚½ãƒƒãƒ‰**ï¼šDELETE
- **ãƒ‘ã‚¹**ï¼š`/api/user/:id`
- **èªè¨¼è¦ä»¶**ï¼šç®¡ç†è€…
- **æ©Ÿèƒ½æ¦‚è¦**ï¼šæŒ‡å®šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç‰©ç†å‰Šé™¤ã—ã¾ã™ã€‚ç®¡ç†è€…ã¯åŒç­‰ã¾ãŸã¯ãã‚Œä»¥ä¸Šã®æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ğŸ’¡ ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹ï¼š

```
const response = await fetch('/api/user/123', {  
  method: 'DELETE',  
  headers: {  
    'Content-Type': 'application/json',  
    'Authorization': 'Bearer your_admin_token',
    'New-Api-User': 'Bearer your_user_id'
  }  
});  
const data = await response.json();
```

âœ… æˆåŠŸå¿œç­”ä¾‹ï¼š

```
{  
  "success": true,  
  "message": ""  
}
```

â— å¤±æ•—å¿œç­”ä¾‹ï¼š

```
{  
  "success": false,  
  "message": "æ— æƒåˆ é™¤åŒæƒé™ç­‰çº§æˆ–æ›´é«˜æƒé™ç­‰çº§çš„ç”¨æˆ·"  
}
```

ğŸ§¾ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜ï¼š

- `id` ï¼ˆæ•°å€¤ï¼‰: ãƒ¦ãƒ¼ã‚¶ãƒ¼ IDã€‚URL ãƒ‘ã‚¹çµŒç”±ã§æ¸¡ã•ã‚Œã¾ã™
- ç‰©ç†å‰Šé™¤æ“ä½œã‚’å®Ÿè¡Œã—ã¾ã™ã€‚å›å¾©ã§ãã¾ã›ã‚“